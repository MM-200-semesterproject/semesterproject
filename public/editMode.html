<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Mode</title>
    <link rel="stylesheet" type="text/css" href="styles/global.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="styles/PresentasjonStyle.css"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;900&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <header class="header">
      <img src="svg/logo.svg" alt="More Slides logo" id="headerLogo" />
    </header>
    <div class="editWrapper">
      <!-- The sidebar menu for our edit page. Buttons can be clickable text instead, or whole thing a menu instead -->
      <div class="editMenu">
        <br /><br />
        <form id="savePresForm">
          <section class="dropdown">
            <select id="presSelect" name="presSelect">
              <option value="pres1">pres1</option>
              <option value="pres2">pres2</option>
              <option value="pres3">pres3</option>
            </select>
          </section>
          <section class="select">
            <button class="selectBtn" id="selectBtn">
              placeholder<span class="dropdownArw" id="dropdownArw"></span>
            </button>
            <div class="selectOptions">
              <a id="pres1">pres 1</a>
              <a id="pres2">pres 2</a>
              <a id="pres2">pres 2</a>
            </div>
          </section>
          <input
            id="inpPresTitle"
            class="input"
            type="text"
            placeholder="Presentation Title"
          />
          <button id="savePres" class="btnGreen" type="submit" value="submit">
            Save Presentation
          </button>
          <button id="createPres" class="btnGreen" type="submit" value="submit">
            Create New Presentation
          </button>
        </form>

        <h2>Add Slide</h2>
        <button id="addTxt" class="btnGrey">Text</button><br />
        <button id="addImg" class="btnGrey">Image</button><br />
        <button id="addList" class="btnGrey">List</button><br />

        <button id="presentMode" class="btnGreen">Presentation mode</button>
      </div>

      <div class="editActiveArea">
        <div id="slideDiv" class="slideDiv slideShowbody">
          <a class="prev" onclick="navigate(-1)">&#8249;</a>
          <div
            id="container"
            class="slideshow-container"
            contenteditable="true"
          ></div>
          <a class="next" onclick="navigate(1)">&#8250;</a>
        </div>
        <div id="navDots" style="text-align: center">
          <span class="dot" onclick="activeSlide(1)"></span>
          <span class="dot" onclick="activeSlide(2)"></span>
          <span class="dot" onclick="activeSlide(3)"></span>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      /* This will be a try for a cutsom dropdown menu -Frida
      let selectBtn = document.getElementsByClassName('selectBtn');
      let options = document.getElementsByClassName('options');

      options.addEventListener 


    //-------------------------------- end of testcode Frida ---------
      /*
    TODO:
    addEventListner to buttons
        function that adds a new slide(for example text)
 */
      let presentation = [
        { text: 'Title 1', },
        { text: 'Title 2',  },
        { text: 'Title 3', img: 'Bilder/eggBilde.jpg' },
        { list: [1,2,3,4,5]},
      ];

      let container = document.getElementById('container');
      let showIndex = 1;

      loadPresentation(presentation);
      loadSlides(showIndex);
      createNavigationDots();

      //---------------------Funksjoner--------------------------
      function activeSlide(n) {
        loadSlides((showIndex = n));
      }
      function navigate(num) {
        loadSlides((showIndex += num));
      }

      function createNavigationDots() {
        let navDots = document.getElementById('navDots');
        navDots.innerHTML = '';
        for (let i = 1; i <= presentation.length; i++) {
          let span = document.createElement('span');
          span.classList.add('dot');
          span.addEventListener('click', function (evt) {
            activeSlide(i);
          });
          navDots.appendChild(span);
        }
      }

      function loadPresentation(arr) {
        container.innerHTML = '';
        for (let slide of arr) {
          let div = document.createElement('div');

          let html = '';
          let text = '';
          let img = '';
          let list= '';

          if (slide.text) {
            text = '<h6>' + slide.text + '</h6>';
          }
          if (slide.img) {
            img = '<img src=' + slide.img + '>';
          }
         
          if (slide.list) {
            let innerOl = '';
             for (let element of slide.list){
              let listElement = '<li>'+element+'</li>';
              innerOl += listElement;
              }
            list ='<ul>'+innerOl+'</ul>';
                     
        }
          div.classList.add('slide');
          html = `${text}
                  ${img}
                  ${list}
                
                        `;
          div.innerHTML = html;
          container.appendChild(div);
        }
      }

      function loadSlides(num) {
        let slideshow = document.getElementsByClassName('slide');
        let dots = document.getElementsByClassName('dot');
        if (num > slideshow.length) {
          showIndex = 1;
        }
        if (num < 1) {
          showIndex = slideshow.length;
        }
        for (let i = 0; i < slideshow.length; i++) {
          slideshow[i].style.display = 'none';
        }
        for (let i = 0; i < dots.length; i++) {
          dots[i].className = dots[i].className.replace(' crntSlide', '');
        }
        slideshow[showIndex - 1].style.display = 'block';
        dots[showIndex - 1].className += ' crntSlide';
        //-------------create slides with button----------------------------------------
      }
      addTxt.addEventListener('click', function () {
        let newSlide = { text: 'Test1' };
        presentation.push(newSlide);
        loadPresentation(presentation);
        createNavigationDots();
        activeSlide(presentation.length);
      });

      addImg.addEventListener('click', function () {
        let newSlide = { img: 'Bilder/eggBilde.jpg' };
        presentation.push(newSlide);
        loadPresentation(presentation);
        createNavigationDots();
        activeSlide(presentation.length);
      });

      addList.addEventListener('click', function () {
        let newSlide = { list: ['a','b','c','d','e'] };
        presentation.push(newSlide);
        loadPresentation(presentation);
        createNavigationDots();
        activeSlide(presentation.length);
      });
    </script>
  </body>
</html>
